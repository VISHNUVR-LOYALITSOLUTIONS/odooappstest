<?xml version="1.0"?>
<odoo>

    <!-- Form view of cab booking-->
     <record model="ir.ui.view" id="cabbook_form_view">
         <field name="name">cabbook.form</field>
         <field name="model">cab_booking.cab_booking</field>
         <field name="arch" type="xml">
             <form string="Booking Form">
                 <header>
                     <button name="button_assigned" string="Assigned" states="draft"  class="oe_highlight" type="object"/>
                     <button name="button_running" string="Running" states="assigned" class="oe_highlight" type="object"/>
                     <button name="button_done" string="Done" states="running" class="oe_highlight" type="object"/>
                     <button name="button_invoiced" string="Make Invoice" states="done" class="oe_highlight" type="object" groups="cab_booking.group_cabbook_manager"/>
                     <button name="button_cancel" string="Cancel" states="draft"   type="object"/>
                     <field name="state" widget="statusbar" statusbar_visible="draft,assigned,running,done,cancel"/>
                 </header>
                 <sheet>
                     <div class="oe_button_box" name="button_box">
                        <button name="action_view_invoice"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-pencil-square-o"
                            attrs="{'invisible': [('invoice_count', '=', 0)]}">
                            <field name="invoice_count" widget="statinfo" string="Invoice"/>
                        </button>
                    </div>
                     <group string="Book Your Cab">
                        <group>
                            <field name="name"/>
                            <field name="customer" attrs="{'readonly': [('state','!=','draft')]}" />
                            <field name="date_start" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="date_end" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="car" attrs="{'readonly': [('state','!=','draft')]}"/>
                        </group>
                        <group>
                            <field name="driver" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="location" attrs="{'readonly': [('state','!=','draft')]}"/>
                            <field name="description" attrs="{'readonly': [('state','!=','draft')]}"/>
                        </group>
                     </group>
                 </sheet>
                 <div class="oe_chatter">
                     <field name="message_follower_ids" widget="mail_followers"/>
                     <field name="message_ids" widget="mail_thread"/>
                 </div>
             </form>
         </field>
     </record>

    <!-- Tree view of cab booking -->
     <record model="ir.ui.view" id="cabbook_list_id">
         <field name="name">cabbook.list</field>
         <field name="model">cab_booking.cab_booking</field>
         <field name="priority" eval="16"/>
         <field name="arch" type="xml">
             <tree string="Cab Booking">
                 <field name="customer"/>
                 <field name="date_start"/>
                 <field name="driver"/>
                 <field name="date_end"/>
                 <field name="car"/>
                 <field name="state"/>
             </tree>
         </field>
     </record>

    <!-- Search view of cab booking -->
    <record model="ir.ui.view" id="cabbook_search_view">
        <field name="name">cabbook.search</field>
        <field name="model">cab_booking.cab_booking</field>
        <field name="arch" type="xml">
            <search>
                <field name="customer"/>
                <field name="driver"/>
                <group string="Group By">
                    <filter name="driver" string="Driver"
                            context="{'group_by': 'driver'}"/>
                </group>
                <group string="Group By">
                    <filter name="customer" string="Customer"
                            context="{'group_by': 'customer'}"/>
                </group>
                <group string="Group By">
                    <filter name="car" string="Vehicle"
                            context="{'group_by': 'car'}"/>
                </group>
                <group string="Group Status">
                    <filter name="state" string="Status"
                            context="{'group_by': 'state'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Calendar view of cab booking -->
    <record id="view_cab_booking_calendar" model="ir.ui.view">
        <field name="name">cab.booking.calendar</field>
        <field name="model">cab_booking.cab_booking</field>
        <field name="arch" type="xml">
            <calendar string="Cab Booking" date_start="date_start" date_stop="date_end" color="state">
                <field name="name"/>
                <field name="driver"/>

            </calendar>
        </field>
    </record>

    <menuitem id="cabbook_menu" name="Cab Manager" />
    <act_window id="action_cab_book" name="Booking" res_model="cab_booking.cab_booking" view_mode="tree,calendar,form" />
    <menuitem id="menu_cab_book" name="Booking" action="action_cab_book" parent="cabbook_menu" />

</odoo>
